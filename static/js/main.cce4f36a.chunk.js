(this["webpackJsonphyperquery-prototype"]=this["webpackJsonphyperquery-prototype"]||[]).push([[0],{30:function(e,a,t){e.exports=t(45)},39:function(e,a,t){},40:function(e){e.exports=JSON.parse('{"themes":{"f":"feminist","q":"queer","r":"antiracist","c":"post/decolonial","d":"disability/crip","e":"political-economic"},"languages":{"de":{"name":"Deutsch","name_en":"German","terms":{"f":{"include":["Feminismus"],"exclude":[]},"q":{"include":["Queer","Transgender","Gender","Geschlecht"],"exclude":[]},"r":{"include":["Rassismus"],"exclude":[]},"c":{"include":["Dekoloniale","Postkoloniale"],"exclude":[]},"d":{"include":["Behinderung"],"exclude":[]},"e":{"include":["Kapitalismus","Neoliberalismus"],"exclude":[]}}},"en":{"name":"English","name_en":"English","terms":{"f":{"include":["feminism"],"exclude":[]},"q":{"include":["queer","transgender","gender"],"exclude":["deviance"]},"r":{"include":["racism","\\"critical race\\""],"exclude":["\\"race relations\\""]},"c":{"include":["decolonial","postcolonial"],"exclude":[]},"d":{"include":["ableism","crip","disability"],"exclude":[]},"e":{"include":["capitalism","neoliberalism"],"exclude":[]}}},"es":{"name":"Espa\xf1ol","name_en":"Spanish","terms":{"f":{"include":["feminismo"],"exclude":[]},"q":{"include":["queer","cuir","transg\xe9nero","\\"estudios de g\xe9nero\\""],"exclude":[]},"r":{"include":["racismo"],"exclude":[]},"c":{"include":["descolonial","decolonial","poscolonial"],"exclude":[]},"d":{"include":["capacitismo","crip","discapacidad"],"exclude":[]},"e":{"include":["capitalismo","neoliberalismo"],"exclude":[]}}},"fr":{"name":"Fran\xe7ais","name_en":"French","terms":{"f":{"include":["f\xe9minisme"],"exclude":[]},"q":{"include":["queer","transgenre","\\"\xe9tudes de genre\\""],"exclude":[]},"r":{"include":["racisme"],"exclude":[]},"c":{"include":["colonialisme"],"exclude":[]},"d":{"include":["handicap"],"exclude":[]},"e":{"include":["capitalisme","n\xe9olib\xe9ralisme"],"exclude":[]}}},"ja":{"name":"\u65e5\u672c\u8a9e","name_en":"Japanese","terms":{"f":{"include":["\u30d5\u30a7\u30df\u30cb\u30ba\u30e0"],"exclude":[]},"q":{"include":["\u30af\u30a3\u30a2"],"exclude":[]},"r":{"include":["\u4eba\u7a2e"],"exclude":[]},"c":{"include":["\u30dd\u30b9\u30c8\u30b3\u30ed\u30cb\u30a2\u30eb"],"exclude":[]},"d":{"include":["\u969c\u5bb3"],"exclude":[]},"e":{"include":["\u8cc7\u672c\u4e3b\u7fa9","\u65b0\u81ea\u7531\u4e3b\u7fa9"],"exclude":[]}}},"pt":{"name":"Portugu\xeas","name_en":"Portuguese","terms":{"f":{"include":["feminismo"],"exclude":[]},"q":{"include":["queer","cuir","transg\xeanero","\\"estudos de g\xeanero\\""],"exclude":[]},"r":{"include":["racismo"],"exclude":[]},"c":{"include":["decolonial","descolonial","p\xf3s-colonial"],"exclude":[]},"d":{"include":["capacitismo","crip","defici\xeancia"],"exclude":[]},"e":{"include":["capitalismo","neoliberalismo"],"exclude":[]}}},"ru":{"name":"\u0420\u0443\u0441\u0441\u043a\u0438\u0439","name_en":"Russian","terms":{"f":{"include":["\u0444\u0435\u043c\u0438\u043d\u0438\u0437\u043c"],"exclude":[]},"q":{"include":["\u0413\u0435\u043d\u0434\u0435\u0440\u043d\u044b\u0435","LGBT"],"exclude":[]},"r":{"include":["\u0440\u0430\u0441\u0438\u0437\u043c"],"exclude":[]},"c":{"include":["\u043a\u043e\u043b\u043e\u043d\u0438\u0430\u043b\u0438\u0437\u043c"],"exclude":[]},"d":{"include":["\u0438\u043d\u0432\u0430\u043b\u0438\u0434"],"exclude":[]},"e":{"include":["\u043a\u0430\u043f\u0438\u0442\u0430\u043b\u0438\u0437\u043c","\u043d\u0435\u043e\u043b\u0438\u0431\u0435\u0440\u0430\u043b\u0438\u0437\u043c"],"exclude":[]}}}},"databases":{"worldcat":{"name":"Worldcat","base_url":"https://www.worldcat.org/search?qt=worldcat_org_all&q="},"mit":{"name":"MIT Libraries","base_url":"https://mit.on.worldcat.org/search?databaseList=&queryString="},"harvard":{"name":"Harvard Library","base_url":"https://hollis.harvard.edu/primo-explore/search?tab=everything&search_scope=everything&vid=HVD2&query=any,contains,"}}}')},45:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(24),l=t.n(s),c=t(19),i=t(7),o=t(3),u=t(4),m=t(6),d=t(5),h=t(13),p=t(10),g=t(25),b=t(26),f=t.n(b),v=t(16),y=t.n(v),E=t(27),O=t.n(E),k=(t(39),t(40)),N=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light bg-light"},r.a.createElement(h.b,{className:"navbar-brand",to:"/"},"Hyperquery"),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/about"},"About")))),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:j}),r.a.createElement(p.a,{exact:!0,path:"/about",component:_}))))}}]),t}(n.Component),j=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(o.a)(this,t),n=a.call(this,e);var r=O.a.parse(n.props.location.search,{ignoreQueryPrefix:!0}),s=[];"terms"in r&&(s=y()(r.terms,{separator:" ",quotes:['"']}).filter(Boolean));var l=null;"theme"in r&&r.theme in k.themes&&(l=r.theme);var c={};for(var u in k.languages)c[u]=!0;if("languages"in r){var m=r.languages.split(",");for(var d in c)m.indexOf(d)>=0?c[d]=!0:c[d]=!1}var h=k.databases?Object.keys(k.databases)[0]:null;return"database"in r&&r.database in k.databases&&(h=r.database),n.state={terms:s,translations:{},selectedTheme:l,selectedLanguages:c,selectedDatabase:h,searchQuery:null,plainSearchQuery:null},n.handleKeyDown=n.handleKeyDown.bind(Object(i.a)(n)),n.handleTermsChange=n.handleTermsChange.bind(Object(i.a)(n)),n.handleThemeChange=n.handleThemeChange.bind(Object(i.a)(n)),n.handleLanguagesChange=n.handleLanguagesChange.bind(Object(i.a)(n)),n.handleDatabaseChange=n.handleDatabaseChange.bind(Object(i.a)(n)),n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.state.terms.length>0&&this.updateTranslations()}},{key:"updateParams",value:function(){var e=[];for(var a in k.languages)this.state.selectedLanguages[a]&&e.push(a);var t="/?theme="+(this.state.selectedTheme||"")+"&languages="+e.join(",")+"&database="+(this.state.selectedDatabase||"")+"&terms="+this.state.terms.join(" ");this.props.history.replace(t)}},{key:"updateTranslations",value:function(){for(var e in this.state.terms){var a=this.state.terms[e];a in this.state.translations||this.consultWiktionary(a,!1)}}},{key:"consultWiktionary",value:function(e,a){var t=this,n="https://en.wiktionary.org/w/api.php?origin=*&format=json&action=query&rvprop=content&prop=revisions&redirects=1&titles="+encodeURIComponent(e.replace(/"/g,""));a&&(n+="/translations"),fetch(n).then((function(e){return e.json()})).then((function(n){var r=JSON.parse(JSON.stringify(t.state.translations)),s=r[e]||{};if(!n||!n.query||!n.query.pages)return r[e]=s,t.setState({translations:r},(function(){t.updateSearchQuery()})),null;for(var l in n.query.pages)if(n.query.pages[l].revisions){var c=n.query.pages[l].revisions[0]["*"];for(var i in k.languages){s[i]=[];for(var o=new RegExp("(?:{{t(?:\\+)?\\|"+i+"\\|)([^|{}\n]+)","g"),u=void 0;null!==(u=o.exec(c));)if(u.length>0)for(var m=0;m<u.length;m++)if(u[m]&&u[m].length>0&&"{"!==u[m][0]){var d=u[m].replace(/[[\]]/g,"");d.split(" ").length>1&&(d='"'+d+'"'),-1===s[i].indexOf(d)&&s[i].push(d)}}}Object.values(s).some((function(e){return e.length>0}))?(r[e]=s,t.setState({translations:r},(function(){t.updateSearchQuery()}))):a||t.consultWiktionary(e,!0)}),(function(e){console.log(e)}))}},{key:"updateSearchQuery",value:function(){var e=this,a=[],t=function(t){if(e.state.selectedLanguages[t]){var n=[],s=[],l=[];if("en"===t)n=e.state.terms.map((function(e){return[e]}));else for(var i in e.state.terms){var o=e.state.terms[i];e.state.translations[o]&&e.state.translations[o][t]&&e.state.translations[o][t].length>0?n.push(e.state.translations[o][t]):n.push([o])}e.state.selectedTheme&&(s=Object(c.a)(k.languages[t].terms[e.state.selectedTheme].include),l=Object(c.a)(k.languages[t].terms[e.state.selectedTheme].exclude));var u=null;if(!(n.length>0))return"continue";u=n.map((function(e){if(e.length>1){var a=e.map((function(e){return r.a.createElement("span",{key:[t,e],className:"dynamic"},e)})).reduce((function(e,a){return[e," OR ",a]}));return r.a.createElement("span",{key:[t,e]},"(",a,")")}return r.a.createElement("span",{key:[t,e],className:"dynamic"},e[0])})).reduce((function(e,a){return[e," AND ",a]})),n.length>1&&(u=r.a.createElement("span",{key:[t,n]},"(",u,")"));var m=null;s.length>0&&(m=s.map((function(e){return r.a.createElement("span",{key:[t,e],className:"static"},e)})).reduce((function(e,a){return[e," OR ",a]})),s.length>1&&(m=r.a.createElement("span",{key:[t,s]},"(",m,")")));var d=null;l.length>0&&(d=l.map((function(e){return r.a.createElement("span",{key:[t,e],className:"static"},e)})).reduce((function(e,a){return[e," OR ",a]})),l.length>1&&(d=r.a.createElement("span",{key:[t,l]},"(",d,")")));var h=null;h=m?d?r.a.createElement("span",{key:t},"(",u," AND ",m," AND NOT ",d,")"):r.a.createElement("span",{key:t},"(",u," AND ",m,")"):u,a.push(h)}};for(var n in k.languages)t(n);if(a.length>0){var s=a.reduce((function(e,a){return[e," OR ",a]}));this.setState({searchQuery:s,plainSearchQuery:f()(s)})}else this.setState({searchQuery:null,plainSearchQuery:null})}},{key:"handleKeyDown",value:function(e){if("Enter"===e.key&&this.state.plainSearchQuery&&this.state.selectedDatabase){var a=k.databases[this.state.selectedDatabase].base_url+encodeURIComponent(this.state.plainSearchQuery);window.location.href=a}}},{key:"handleTermsChange",value:function(e){var a=this,t=y()(e.target.value,{separator:" ",quotes:['"']}).filter(Boolean);this.setState({terms:t},(function(){a.updateTranslations(),a.updateSearchQuery(),a.updateParams()}))}},{key:"handleThemeChange",value:function(e,a){var t=this;e.target.checked&&this.setState({selectedTheme:a},(function(){t.updateSearchQuery(),t.updateParams()}))}},{key:"handleLanguagesChange",value:function(e,a){var t=this,n=JSON.parse(JSON.stringify(this.state.selectedLanguages));n[a]=e,this.setState({selectedLanguages:n},(function(){t.updateTranslations(),t.updateSearchQuery(),t.updateParams()}))}},{key:"handleDatabaseChange",value:function(e){var a=this;this.setState({selectedDatabase:e},(function(){a.updateParams()}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md mt-3 mb-3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"terms-input"},"Search for works about"),r.a.createElement(x,{onKeyDown:this.handleKeyDown,defaultValue:this.state.terms,onChange:this.handleTermsChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"that engage with"),r.a.createElement("br",null),r.a.createElement(w,{themes:k.themes,defaultValue:this.state.selectedTheme,onChange:this.handleThemeChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"themes in"),r.a.createElement("br",null),r.a.createElement(S,{languages:k.languages,defaultValue:this.state.selectedLanguages,onChange:this.handleLanguagesChange})))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"form-inline"},r.a.createElement(D,{plainSearchQuery:this.state.plainSearchQuery,selectedDatabase:this.state.selectedDatabase}),r.a.createElement("div",{className:"input-group mb-1 mt-1"},r.a.createElement(T,{databases:k.databases,defaultValue:this.state.selectedDatabase,onChange:this.handleDatabaseChange}))))),r.a.createElement(Q,{selectedTheme:this.state.selectedTheme,selectedLanguages:this.state.selectedLanguages,selectedDatabase:this.state.selectedDatabase})),r.a.createElement("div",{className:"col-md mt-3 mb-3"},r.a.createElement(L,{searchQuery:this.state.searchQuery}),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",null,"Search across linguistic barriers for scholarly works that engage with counterhegemonic intellectual traditions."),r.a.createElement("p",null,"This tool composes a ",r.a.createElement("em",null,"hyperquery"),", an augmented search query that uses ",r.a.createElement("span",{className:"query-preview"},"Boolean logic")," to combine ",r.a.createElement("span",{className:"dynamic"},"automatic translations")," of your search terms with ",r.a.createElement("span",{className:"static"},"curated terms")," in each language."))))))}}]),t}(n.Component),x=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.DebounceInput,{minLength:2,debounceTimeout:250,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,value:this.props.defaultValue.join(" "),autoFocus:!0,id:"terms-input",type:"text",className:"form-control",placeholder:"Type search terms, e.g., linguistics metaphor"})}}]),t}(n.Component),C=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleChange=n.handleChange.bind(Object(i.a)(n)),n}return Object(u.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e,this.props.id)}},{key:"render",value:function(){var e="theme-button-"+this.props.id;return r.a.createElement("div",{className:"custom-control custom-radio custom-control-inline"},r.a.createElement("input",{id:e,onChange:this.handleChange,checked:this.props.defaultValue,name:"theme-buttons",type:"radio",className:"custom-control-input"}),r.a.createElement("label",{htmlFor:e,className:"custom-control-label"},this.props.name))}}]),t}(n.Component),w=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=[];for(var a in this.props.themes)e.push(r.a.createElement(C,{key:a,id:a,name:this.props.themes[a],defaultValue:this.props.defaultValue===a,onChange:this.props.onChange}));return e}}]),t}(n.Component),q=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={isChecked:n.props.defaultValue},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n}return Object(u.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e.target.checked,this.props.id),this.setState({isChecked:e.target.checked})}},{key:"render",value:function(){var e="language-checkbox-"+this.props.id;return r.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},r.a.createElement("input",{id:e,checked:this.state.isChecked,onChange:this.handleChange,type:"checkbox",className:"custom-control-input"}),r.a.createElement("label",{htmlFor:e,className:"custom-control-label"},this.props.name))}}]),t}(n.Component),S=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=[];for(var a in this.props.languages)e.push(r.a.createElement(q,{key:a,id:a,name:this.props.languages[a].name,englishName:this.props.languages[a].name_en,defaultValue:this.props.defaultValue[a],onChange:this.props.onChange}));return e}}]),t}(n.Component),T=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={selectedId:n.props.defaultValue},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n}return Object(u.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e.target.value),this.setState({selectedId:e.target.value})}},{key:"render",value:function(){var e=[];for(var a in this.props.databases)e.push(r.a.createElement("option",{key:a,value:a},this.props.databases[a].name));return r.a.createElement("select",{value:this.state.selectedId,onChange:this.handleChange,className:"form-control"},e)}}]),t}(n.Component),D=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){if(this.props.plainSearchQuery){var e=k.databases[this.props.selectedDatabase].base_url+encodeURIComponent(this.props.plainSearchQuery);return r.a.createElement("a",{href:e},r.a.createElement("button",{className:"btn btn-success mr-3 mb-1 mt-1"},"Search"))}return r.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-secondary disabled mr-3 mb-1 mt-1"},"Search")}}]),t}(n.Component),Q=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleChange=n.handleChange.bind(Object(i.a)(n)),n}return Object(u.a)(t,[{key:"handleChange",value:function(e){return null}},{key:"handleFocus",value:function(e){e.target.select()}},{key:"render",value:function(){var e=[];for(var a in k.languages)this.props.selectedLanguages[a]&&e.push(a);var t="https://hyperquery.github.io/#/?theme="+(this.props.selectedTheme||"")+"&languages="+e.join(",")+"&database="+(this.props.selectedDatabase||"");return r.a.createElement("div",{className:"input-group input-group-sm mt-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Save defaults")),r.a.createElement("input",{value:t,onChange:this.handleChange,onFocus:this.handleFocus,type:"text",className:"form-control text-monospace"}))}}]),t}(n.Component),L=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return this.props.searchQuery?r.a.createElement("div",{className:"card mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("code",{className:"query-preview"},r.a.createElement("div",null,this.props.searchQuery)))):null}}]),t}(n.Component),_=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 mt-3 mb-3"},r.a.createElement("h2",null,"About"),r.a.createElement("p",null,r.a.createElement(h.b,{to:"/"},"Hyperquery")," is an experimental search tool for academic literature. Its purpose is to facilitate searching across linguistic barriers for scholarly works that engage with counterhegemonic intellectual traditions."),r.a.createElement("p",null,"We welcome questions and suggestions, as well as contributions of curated terms in any language. Contact us at ",r.a.createElement("a",{href:"mailto:hyperquery@mit.edu"},"hyperquery@mit.edu"),"."),r.a.createElement("h4",null,"How it works"),r.a.createElement("ul",null,r.a.createElement("li",null,"Search terms are case sensitive. For example, the tool finds translations for ",r.a.createElement("code",{className:"dynamic"},"biology")," but not for ",r.a.createElement("code",{className:"dynamic"},"Biology"),", and for ",r.a.createElement("code",{className:"dynamic"},"Soviet")," but not for ",r.a.createElement("code",{className:"dynamic"},"soviet"),"."),r.a.createElement("li",null,"Search terms should be separated by spaces, for example ",r.a.createElement("code",{className:"dynamic"},"modernism architecture utopia"),"."),r.a.createElement("li",null,"A search term may consist of multiple words inside quotes, for example ",r.a.createElement("code",{className:"dynamic"},'"Turing machine"'),"."),r.a.createElement("li",null,"Automatic translations are provided by ",r.a.createElement("a",{href:"https://www.wiktionary.org/"},"Wiktionary"),"."),r.a.createElement("li",null,"At this time, search terms should be in English for automatic translations to appear. We intend to support more languages in the future, but non-English editions of Wiktionary have significantly less translations available."),r.a.createElement("li",null,"The tool supports both the inclusion and the exclusion of curated terms. For example, the tool may search for works that include the term ",r.a.createElement("code",{className:"static"},'"critical race"')," but that exclude ",r.a.createElement("code",{className:"static"},'"race relations"'),", since the latter tends to pick out outdated literature (note the operator ",r.a.createElement("code",{className:"query-preview"},"NOT"),")."),r.a.createElement("li",null,"For a primer on Boolean operators (",r.a.createElement("code",{className:"query-preview"},"AND"),", ",r.a.createElement("code",{className:"query-preview"},"OR"),", ",r.a.createElement("code",{className:"query-preview"},"NOT"),"), see this ",r.a.createElement("a",{href:"https://libguides.mit.edu/c.php?g=175963&p=1158594"},"guide")," from the MIT Libraries.")))))}}]),t}(n.Component),F=N;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.cce4f36a.chunk.js.map